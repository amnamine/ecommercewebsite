<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Dashboard - ElectroMart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="font-inter bg-gray-100 text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <a href="index.html" class="flex items-center space-x-2">
                    <svg class="h-10 w-10 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                    </svg>
                    <span class="text-2xl font-bold text-indigo-600">ElectroMart</span>
                </a>

                <nav class="flex items-center space-x-3 sm:space-x-5">
                    <a href="index.html" class="text-gray-600 hover:text-indigo-600 transition-colors duration-300 font-medium">Home</a>
                    <a href="index.html#products" class="text-gray-600 hover:text-indigo-600 transition-colors duration-300 font-medium">Browse Products</a>
                    <div class="relative group">
                        <button class="text-indigo-600 font-semibold flex items-center">
                            Seller Account <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </button>
                        <div class="absolute right-0 mt-2 w-52 bg-white rounded-md shadow-xl z-20 hidden group-hover:block animate-fadeIn">
                            <a href="account_seller.html" class="block px-4 py-2 text-sm text-indigo-600 bg-indigo-50 rounded-t-md">Seller Dashboard</a>
                            <a href="#my-products" data-section="my-products" class="account-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">My Products</a>
                            <a href="#add-product" data-section="add-product" class="account-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">Add New Product</a>
                            <a href="#orders-received" data-section="orders-received" class="account-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">Orders Received</a>
                            <a href="#earnings" data-section="earnings" class="account-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">Earnings</a>
                            <a href="#seller-profile" data-section="seller-profile" class="account-nav-link block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">Seller Profile</a>
                            <a href="#" id="logoutButtonSeller" class="block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-b-md">Logout</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col md:flex-row gap-8">
            <aside class="w-full md:w-1/4">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <div class="flex items-center mb-6">
                        <img id="sellerAvatar" src="https://placehold.co/100x100/E0E7FF/4338CA?text=Seller" alt="Seller Avatar" class="w-16 h-16 rounded-full mr-4 border-2 border-indigo-200">
                        <div>
                            <h2 id="sellerName" class="text-xl font-semibold text-gray-800">Welcome, Seller!</h2>
                            <p id="sellerEmail" class="text-sm text-gray-500">seller@example.com</p>
                        </div>
                    </div>
                    <nav class="space-y-2">
                        <a href="#dashboard-seller" data-section="dashboard-seller" class="account-nav-link active-nav-link group flex items-center px-4 py-3 text-indigo-700 bg-indigo-100 rounded-lg hover:bg-indigo-200 transition-colors">
                            <i class="fas fa-tachometer-alt w-5 h-5 mr-3 text-indigo-500 group-hover:text-indigo-700"></i>
                            Dashboard
                        </a>
                        <a href="#my-products" data-section="my-products" class="account-nav-link group flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors">
                            <i class="fas fa-boxes w-5 h-5 mr-3 text-gray-400 group-hover:text-indigo-700"></i>
                            My Products
                        </a>
                        <a href="#add-product" data-section="add-product" class="account-nav-link group flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors">
                            <i class="fas fa-plus-circle w-5 h-5 mr-3 text-gray-400 group-hover:text-indigo-700"></i>
                            Add New Product
                        </a>
                        <a href="#orders-received" data-section="orders-received" class="account-nav-link group flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors">
                            <i class="fas fa-receipt w-5 h-5 mr-3 text-gray-400 group-hover:text-indigo-700"></i>
                            Orders Received
                        </a>
                        <a href="#earnings" data-section="earnings" class="account-nav-link group flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors">
                            <i class="fas fa-dollar-sign w-5 h-5 mr-3 text-gray-400 group-hover:text-indigo-700"></i>
                            Earnings
                        </a>
                        <a href="#seller-profile" data-section="seller-profile" class="account-nav-link group flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition-colors">
                            <i class="fas fa-store w-5 h-5 mr-3 text-gray-400 group-hover:text-indigo-700"></i>
                            Seller Profile
                        </a>
                        <a href="#" id="sidebarLogoutButtonSeller" class="group flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-red-100 hover:text-red-700 transition-colors">
                            <i class="fas fa-sign-out-alt w-5 h-5 mr-3 text-gray-400 group-hover:text-red-700"></i>
                            Logout
                        </a>
                    </nav>
                </div>
            </aside>

            <section id="sellerAccountContent" class="w-full md:w-3/4">
                <div id="dashboard-seller-section" class="account-section bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">Seller Overview</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-blue-50 p-6 rounded-lg shadow hover:shadow-md transition-shadow">
                            <div class="flex items-center text-blue-600 mb-2">
                                <i class="fas fa-boxes fa-2x mr-3"></i>
                                <span class="text-3xl font-bold" id="totalProductsListed">15</span>
                            </div>
                            <p class="text-gray-700">Products Listed</p>
                        </div>
                        <div class="bg-green-50 p-6 rounded-lg shadow hover:shadow-md transition-shadow">
                            <div class="flex items-center text-green-600 mb-2">
                                <i class="fas fa-chart-line fa-2x mr-3"></i>
                                <span class="text-3xl font-bold" id="totalSales">$1,250</span>
                            </div>
                            <p class="text-gray-700">Total Sales (Month)</p>
                        </div>
                        <div class="bg-purple-50 p-6 rounded-lg shadow hover:shadow-md transition-shadow">
                            <div class="flex items-center text-purple-600 mb-2">
                                <i class="fas fa-receipt fa-2x mr-3"></i>
                                <span class="text-3xl font-bold" id="pendingOrders">3</span>
                            </div>
                            <p class="text-gray-700">Pending Orders</p>
                        </div>
                    </div>
                    <div class="mt-8">
                        <h4 class="text-xl font-semibold text-gray-700 mb-4">Recent Notifications</h4>
                        <p class="text-gray-600">No new notifications.</p>
                        </div>
                </div>

                <div id="my-products-section" class="account-section hidden bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-semibold text-gray-800">My Products</h3>
                        <a href="#add-product" data-section="add-product" class="account-nav-link-inline bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg text-sm">
                            <i class="fas fa-plus mr-1"></i> Add New Product
                        </a>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-4 mb-4 flex flex-col sm:flex-row items-center gap-4 hover:shadow-md transition-shadow">
                        <img src="https://placehold.co/100x100/E2E8F0/4A5568?text=MyProduct" alt="Product" class="w-20 h-20 rounded-md object-cover">
                        <div class="flex-grow">
                            <h5 class="font-semibold text-gray-700">Handcrafted Wooden Bowl</h5>
                            <p class="text-sm text-gray-500">SKU: HWB-001 | Stock: 25</p>
                            <p class="text-sm text-green-600 font-medium">Price: $45.00</p>
                        </div>
                        <div class="flex space-x-2 mt-3 sm:mt-0">
                            <button class="text-blue-600 hover:text-blue-800 font-medium text-xs p-2 rounded hover:bg-blue-50"><i class="fas fa-edit mr-1"></i>Edit</button>
                            <button class="text-red-500 hover:text-red-700 font-medium text-xs p-2 rounded hover:bg-red-50"><i class="fas fa-trash-alt mr-1"></i>Delete</button>
                        </div>
                    </div>
                    <p id="noProductsMessage" class="text-gray-600 hidden">You haven't listed any products yet.</p>
                </div>

                <div id="add-product-section" class="account-section hidden bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">Add New Product</h3>
                    <form id="addProductForm" class="space-y-6">
                        <div>
                            <label for="productName" class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
                            <input type="text" id="productName" name="productName" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="productDescription" class="block text-sm font-medium text-gray-700 mb-1">Product Description</label>
                            <textarea id="productDescription" name="productDescription" rows="4" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <div>
                                <label for="productPrice" class="block text-sm font-medium text-gray-700 mb-1">Price ($)</label>
                                <input type="number" id="productPrice" name="productPrice" step="0.01" min="0" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <div>
                                <label for="productStock" class="block text-sm font-medium text-gray-700 mb-1">Stock Quantity</label>
                                <input type="number" id="productStock" name="productStock" min="0" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                        </div>
                        <div>
                            <label for="productCategory" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                            <select id="productCategory" name="productCategory" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 bg-white">
                                <option value="">Select Category</option>
                                <option value="electronics">Electronics</option>
                                <option value="clothing">Clothing</option>
                                <option value="homegoods">Home Goods</option>
                                <option value="handmade">Handmade</option>
                                </select>
                        </div>
                        <div>
                            <label for="productImages" class="block text-sm font-medium text-gray-700 mb-1">Product Images (Max 5)</label>
                            <input type="file" id="productImages" name="productImages" multiple accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                        </div>
                        <div>
                            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2.5 px-6 rounded-lg transition-colors">Add Product</button>
                        </div>
                    </form>
                    <div id="addProductMessage" class="mt-4 text-sm"></div>
                </div>

                <div id="orders-received-section" class="account-section hidden bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">Orders Received</h3>
                     <div class="border border-gray-200 rounded-lg p-4 mb-4 hover:shadow-md transition-shadow">
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2">
                            <div>
                                <p class="text-sm text-gray-500">Order ID: <span class="font-medium text-indigo-600">#EM987654321</span></p>
                                <p class="text-sm text-gray-500">Customer: John Buyer</p>
                                <p class="text-sm text-gray-500">Order Date: <span class="font-medium">June 01, 2024</span></p>
                            </div>
                            <span class="mt-2 sm:mt-0 text-sm font-semibold px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full">Processing</span>
                        </div>
                        <div class="mt-3 border-t pt-3">
                            <p class="font-medium text-gray-700">Product: Handcrafted Wooden Bowl - Qty: 1</p>
                            <p class="text-sm text-gray-600">Shipping Address: 123 Buyer Lane, Testville, USA</p>
                        </div>
                        <div class="mt-4 text-right">
                            <button class="text-indigo-600 hover:text-indigo-800 font-medium text-sm mr-3">View Order Details</button>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white text-xs font-semibold py-1.5 px-3 rounded-lg transition-colors">Mark as Shipped</button>
                        </div>
                    </div>
                    <p id="noReceivedOrdersMessage" class="text-gray-600 hidden">You have no new orders.</p>
                </div>

                <div id="earnings-section" class="account-section hidden bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">Earnings & Payouts</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-green-50 p-5 rounded-lg">
                            <p class="text-sm text-green-700">Available Balance</p>
                            <p class="text-3xl font-bold text-green-600" id="availableBalance">$875.50</p>
                        </div>
                        <div class="bg-red-50 p-5 rounded-lg">
                            <p class="text-sm text-red-700">Pending Clearance</p>
                            <p class="text-3xl font-bold text-red-600" id="pendingClearance">$120.00</p>
                        </div>
                    </div>
                    <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2.5 px-5 rounded-lg transition-colors text-sm">Request Payout</button>
                    <h4 class="text-xl font-semibold text-gray-700 mt-8 mb-4">Payout History</h4>
                    <p class="text-gray-600">No payout history yet.</p>
                </div>

                <div id="seller-profile-section" class="account-section hidden bg-white p-6 sm:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-6">Seller Profile & Store Settings</h3>
                    <form id="sellerProfileForm" class="space-y-6">
                        <div>
                            <label for="storeName" class="block text-sm font-medium text-gray-700 mb-1">Store Name</label>
                            <input type="text" id="storeName" name="storeName" value="My Awesome Store" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="sellerFullNameProfile" class="block text-sm font-medium text-gray-700 mb-1">Your Full Name</label>
                            <input type="text" id="sellerFullNameProfile" name="sellerFullNameProfile" value="Current Seller Name" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="sellerEmailProfile" class="block text-sm font-medium text-gray-700 mb-1">Contact Email (Public)</label>
                            <input type="email" id="sellerEmailProfile" name="sellerEmailProfile" value="seller-contact@example.com" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                         <div>
                            <label for="storeDescription" class="block text-sm font-medium text-gray-700 mb-1">Store Description</label>
                            <textarea id="storeDescription" name="storeDescription" rows="3" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">Welcome to my store where I sell amazing things!</textarea>
                        </div>
                        <hr>
                        <h4 class="text-lg font-medium text-gray-700 pt-2">Payout Information (Placeholder)</h4>
                        <p class="text-sm text-gray-500">Connect your bank account or PayPal to receive payouts.</p>
                        <button type="button" class="text-indigo-600 hover:text-indigo-800 font-medium text-sm">Setup Payout Method</button>
                        <div>
                            <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2.5 px-6 rounded-lg transition-colors">Save Seller Settings</button>
                        </div>
                    </form>
                    <div id="sellerProfileMessage" class="mt-4 text-sm"></div>
                </div>

            </section>
        </div>
    </main>

    <footer class="bg-gray-800 text-gray-300 pt-12 pb-8 mt-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="border-t border-gray-700 pt-8 text-center text-sm">
                <p>&copy; <span id="currentYearSeller"></span> ElectroMart. All Rights Reserved. Seller Portal.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script> <script>
        // Client-side script for seller account page
        document.addEventListener('DOMContentLoaded', () => {
            const accountNavLinks = document.querySelectorAll('.account-nav-link');
            const accountSections = document.querySelectorAll('.account-section');
            const sellerNameDisplay = document.getElementById('sellerName');
            const sellerEmailDisplay = document.getElementById('sellerEmail');
            const logoutButtonSeller = document.getElementById('logoutButtonSeller');
            const sidebarLogoutButtonSeller = document.getElementById('sidebarLogoutButtonSeller');
            const currentYearSeller = document.getElementById('currentYearSeller');

            if(currentYearSeller) currentYearSeller.textContent = new Date().getFullYear();

            // Function to display seller info (call this after login)
            function displaySellerInfo() {
                const token = localStorage.getItem('authToken'); // Assuming same token stores seller info
                if (token) {
                    try {
                        const payload = JSON.parse(atob(token.split('.')[1]));
                        if (payload.accountType !== 'seller' && payload.accountType !== 'admin') {
                            // If not a seller or admin, redirect them away.
                            // console.warn("Access denied: Not a seller account.");
                            // window.location.href = 'index.html'; // Or login page
                            // return;
                        }
                        if (sellerNameDisplay) sellerNameDisplay.textContent = `Welcome, ${payload.fullName || 'Seller'}!`;
                        if (sellerEmailDisplay) sellerEmailDisplay.textContent = payload.email || 'seller@example.com';
                        // Populate other seller-specific fields if needed
                    } catch (e) {
                        console.error("Error decoding token or seller data not found:", e);
                        // window.location.href = 'login.html';
                    }
                } else {
                    console.log('No auth token found, redirecting to login.');
                    // window.location.href = 'login.html';
                }
            }
            
            displaySellerInfo();

            function switchSection(sectionId) {
                accountSections.forEach(section => section.classList.add('hidden'));
                const activeSection = document.getElementById(`${sectionId}-section`);
                if (activeSection) activeSection.classList.remove('hidden');

                accountNavLinks.forEach(link => {
                    link.classList.remove('active-nav-link', 'bg-indigo-100', 'text-indigo-700');
                    link.classList.add('text-gray-600');
                    if (link.dataset.section === sectionId) {
                        link.classList.add('active-nav-link', 'bg-indigo-100', 'text-indigo-700');
                        link.classList.remove('text-gray-600');
                    }
                });
                window.location.hash = sectionId;
            }
            
            // Handle inline links like "Add New Product" button in "My Products" section
            document.querySelectorAll('.account-nav-link-inline').forEach(inlineLink => {
                inlineLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = inlineLink.dataset.section;
                    if (sectionId) {
                        switchSection(sectionId);
                    }
                });
            });


            accountNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    switchSection(sectionId);
                });
            });

            if (window.location.hash) {
                const sectionIdFromHash = window.location.hash.substring(1);
                const targetSection = document.getElementById(`${sectionIdFromHash}-section`);
                 if (targetSection && Array.from(accountNavLinks).some(link => link.dataset.section === sectionIdFromHash)) {
                    switchSection(sectionIdFromHash);
                } else {
                     switchSection('dashboard-seller'); 
                }
            } else {
                switchSection('dashboard-seller'); // Default for seller
            }

            function handleSellerLogout() {
                localStorage.removeItem('authToken');
                console.log('Seller logged out.');
                window.location.href = 'login.html';
            }

            if(logoutButtonSeller) logoutButtonSeller.addEventListener('click', handleSellerLogout);
            if(sidebarLogoutButtonSeller) sidebarLogoutButtonSeller.addEventListener('click', handleSellerLogout);

            // Add Product Form (Placeholder)
            const addProductForm = document.getElementById('addProductForm');
            if(addProductForm) {
                addProductForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    const messageDiv = document.getElementById('addProductMessage');
                    messageDiv.textContent = 'Product added successfully (simulation)!';
                    messageDiv.className = 'text-green-600';
                    console.log('Add product form submitted. Implement API call.');
                    // addProductForm.reset();
                    setTimeout(() => { messageDiv.textContent = ''; }, 3000);
                });
            }
            
            // Seller Profile Form (Placeholder)
            const sellerProfileForm = document.getElementById('sellerProfileForm');
            if(sellerProfileForm) {
                sellerProfileForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    const messageDiv = document.getElementById('sellerProfileMessage');
                    messageDiv.textContent = 'Seller profile updated (simulation)!';
                    messageDiv.className = 'text-green-600';
                    console.log('Seller profile form submitted. Implement API call.');
                    setTimeout(() => { messageDiv.textContent = ''; }, 3000);
                });
            }

            // TODO: Implement API calls for fetching/updating seller data, products, orders, earnings.
        });
    </script>
</body>
</html>